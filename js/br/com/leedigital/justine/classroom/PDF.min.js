import Document from"./Document.js";import ContentPanel from"../../../../../ContentPanel.js";import Page from"./Page.js";import{UTIL}from"./util/Util.js";export default class PDF extends Document{constructor(arrayBuffer,contentPanel){super(arrayBuffer,contentPanel)}init(arrayBuffer,contentPanel){const pages=this.pages,thiz=this,loadingTask=pdfjsLib.getDocument(arrayBuffer),innerContentElementPanel=this.innerContentElementPanel,width=window.outerWidth,height=window.outerHeight,scale=Math.max(width/height,height/width);innerContentElementPanel.innerHTML=null;const frag=document.createDocumentFragment();loadingTask.promise.then((function(pdf){const numPages=pdf.numPages;thiz.pageStartElement.min=1,thiz.pageStartElement.max=numPages;for(let i=1;i<=numPages;i++)pdf.getPage(i).then((function(pageObject){const page=new Page(thiz,pageObject);page.title=thiz.title,pages.push(page),page.render(scale),frag.appendChild(page.pageElement),page.restore(),i===numPages&&setTimeout(()=>{innerContentElementPanel.appendChild(frag),thiz.contentPanel.reset(),thiz.pageManager(contentPanel.contentElement),UTIL.hiddenProgressBar()},100)}))}))}}